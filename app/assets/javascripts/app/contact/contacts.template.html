<!--<script src="app/contcontacts.jst.js"></script>-->
<div>
	<style>
		a:hover {
			text-decoration:none;
			cursor:pointer;
		}
	</style>
	<div ng-if="templatePath == ''">
		<div style="position: relative;float: left; width:200px;background-color: #c8c8c8">
			<ul class="list-unstyled">
				<li class="box-label"><a href="/#!/contacts">All Contacts <span>{{tags[0].count}}</span></a></li>
				<li class="divider"></li>
				<li ng-repeat="t in tags"  ng-if="$index > 0">
					<a ng-click="tags_clik(t.id)"> <span class="label label-default" ng-style="{'background-color':t.color}">{{t.name}}</span> <span>{{t.count}}</span></a>
					<a href="#" data-toggle="modal" data-target="#myModal"  ng-click="update_label(t)"><i class="fa fa-cog pull-right" disabled title='Update label' aria-hidden="true"></i></a>
					<a href="#" ng-click="apply_label(t)"><i disabled title='Apply label to selected contacts' class="fa fa-hand-o-right  pull-right" aria-hidden="true"></i></a>
				</li>
				<li class="divider"></li>
				<li class="box-label"><a href="#" data-toggle="modal" ng-click="open_label()" data-target="#myModal"><i class="fa fa-plus" aria-hidden="true"></i>
					Create New Label</a></li>
				<div id="myModal" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
					 aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—
								</button>
								<h4 class="modal-title" id="myModalLabel">{{label_selected.title}}</h4></div>
							<div class="modal-body">
								<from class="form-horizontal">
									<div class="form-group">
										<label class="col-md-12">Name of Label</label>
										<div class="col-md-12">
											<input type="text" class="form-control" ng-model="label_selected.name" placeholder="type name"></div>
									</div>
									<div class="form-group">
										<label>Pick text color</label>
										<table cellpadding="0" cellspacing="0">
											<tbody>
											<tr>
												<td ng-repeat="lc in labels" ng-style="{'background-color':lc.color}"
													ng-click="select_color(lc)"
													style="border: 1px solid #666;height: 17px; line-height: 11px; position: relative; width: 17px; cursor: pointer;">
													<i ng-if="lc.selected" class="fa fa-check"></i>
												</td>
											</tr>
											</tbody>
										</table>
									</div>
								</from>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-info" ng-click="create_label()" data-dismiss="modal">Save
								</button>
								<button type="button" class="btn btn-default" data-dismiss="modal">
									Cancel
								</button>
								<button type="button" ng-if="label_selected.delete_show" class="btn btn-danger pull-left" ng-click="delete_label()" data-dismiss="modal">Delete
								</button>
							</div>
						</div>
						<!-- /.modal-content -->
					</div>
					<!-- /.modal-dialog -->
				</div>
				<li class="divider"></li>
			</ul>
		</div>
		<div style="position: relative;float: left; width:900px;">
			<div><!--<div ng-controller="NewUserController">-->
				<div class="form-group">
					<div class="col-sm-9">
						<!--<select id="user_search1" class="form-control select2" multiple ng-model="user_search">-->
						<!--</select>-->
						<searchbar usersearch="usersearch" url="/user/user_search"></searchbar>
					</div>
					<div class="col-sm-3">
						<button class='btn btn-primary pull-right' ng-click="contact_detail()">New contact</button>
					</div>
				</div>
			</div>

			<table class="table table-striped table-hover table-condensed ">
				<thead>
				<th><input type="checkbox" ng-change="select_all(contacts)" ng-model="selected_all"></th>
					<th>#</th>
					<th>Image</th>
					<th>
						<sorting colname="'Name'" sortbyname="'sortbyfirstname'"></sorting>
					</th>
					<th>
						<sorting colname="'Email'" sortbyname="'sortbyemail'"></sorting>
					</th>
					<th>Type</th>
					<th>
						<sorting colname="'Created at'" sortbyname="'sortbycreated_at'">
					</th>
					<th>Last login</th>
				</tr>
				</thead>
				<!--<tbody ng-controller="UserController">-->
				<tbody>
				<tr ng-repeat="c in contacts">
					<th><input type="checkbox" ng-model="c.selected"></th>
					<!--<th scope="row" ng-if="c.group!='o'"><a href="#" ng-click="show_update_hash(c.id)">{{c.id}}</a></th>-->
					<th scope="row" ng-if="c.type!='o'"><a href="#" ng-click="contact_detail(c.id)">{{c.id}}</a></th>
					<th scope="row" ng-if="c.type=='o'">{{c.id}}</th>
					<td>
						<!--<vcardtrigger type='profile' src='c'></vcardtrigger>-->
					</td>
					<td>{{c.firstname +' '+c.lastname}}</td>
					<td>{{c.email}}</td>
					<td>
						<div style="cursor: default;background-color: #e8eaf6" class="avatar-circle"
							 ng-attr-title="{{src.firstname+ ' ' + src.lastname}}"
							 ng-style="{'width':'30px', 'height':'30px'}">
							<span class=" initials" style="font-size:18px"
								  ng-style="{'color':c.type=='o' ? '#d9534f' :(c.type=='e'?'#ffbb33' :'#5cb85c')}">{{c.type}}</span>
						</div>
					</td>
					<td>{{from_now(c.created_at)}}</td>
					<td>{{from_now(c.login_at)}}</td>
				</tr>
				</tbody>
			</table>
			<paging list="contacts" listname="users" urlparams='["tag"]' refresh="refresh_list" url="/user/user_list"></paging>
		</div>
	</div>
	<div ng-if="templatePath != ''" class="container">
		<div>
			<ng-include src="'assets/app/contact/new-contact.template.html'"></ng-include>
		</div>
	</div>
</div>